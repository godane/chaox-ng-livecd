#!/bin/sh

set -e

filename="$1"

[ -e "$filename" ] || {
    echo "USAGE: $0 path/to/fglrx_drv.so > hw_ati_hwdb" >&2
    exit 1
}

echo "# Listing generated by fglrx_supported_chakra-20090530."
echo "# Do not edit manually."
echo "# (C) 2009 Chakra-Developer-Team"

strings "$filename" | \
  sed -n 's/^0x\([0-9A-F]\{4\}\)$/0x\1/p' | \
  sort | uniq