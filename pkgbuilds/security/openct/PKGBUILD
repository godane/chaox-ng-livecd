# Contributor: William Rea <sillywilly@gmail.com>
# Contributor: Lorenzo Nizzi Grifi Gargiolli <lorenzo.nizzi.grifi@gmail.com>

pkgname=openct
pkgver=0.6.16
pkgrel=1
pkgdesc="Implements drivers for several smart card readers"
arch=('i686' 'x86_64')
url="http://www.opensc-project.org/openct"
options=('!libtool')
license="LGPL"
backup=(etc/openct.conf)
depends=('pcsclite' 'libusb' 'libtool')
source=(http://www.opensc-project.org/files/openct/openct-$pkgver.tar.gz \
	openct )
md5sums=('d8d8c63269985303a303a218c4b953d7'
         'a1878066a177db21366d50c9a37b2dd9')


build() {
	cd ${srcdir}/$pkgname-$pkgver
	./configure --prefix=/usr --sysconfdir=/etc --enable-usb --enable-pcsc || return 1
	make || return 1
	make DESTDIR=$startdir/pkg install || return 1
	
	install -D ${srcdir}/$pkgname-$pkgver/etc/openct.udev $startdir/pkg/etc/udev/rules.d/95-openct.rules || return 1 
        install -D ${srcdir}/$pkgname-$pkgver/etc/openct_usb $startdir/pkg/lib/udev/openct_usb || return 1 
	install -D ${srcdir}/$pkgname-$pkgver/etc/openct_pcmcia $startdir/pkg/lib/udev/openct_pcmcia || return 1 
	install -D ${srcdir}/$pkgname-$pkgver/etc/openct_serial $startdir/pkg/lib/udev/openct_serial || return 1
	install -D ${srcdir}/$pkgname-$pkgver/etc/openct.conf $startdir/pkg/etc/openct.conf || return 1
	install -D -m755 ${srcdir}/openct $startdir/pkg/etc/rc.d/openct || return 1
	mkdir -p ${pkgdir}/var/run/openct
}
